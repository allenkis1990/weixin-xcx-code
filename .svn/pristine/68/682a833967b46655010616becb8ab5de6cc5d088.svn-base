const app = getApp()
Component({
  /**
   * 组件的属性列表
   */
  properties: {
    condition: {
      type: Boolean,
      value: false
    },
    choiceHourse: {
      type: String,
      value: '0'
    },
    needHourse: {
      type: String,
      value: '0'
    },
    courseList: {
      type: Array,
      value: []
    },
    trainingClassId: {
        type: String,
        value: '',
        observer:function(nv){
            var that=this;
            if(nv){
                //console.log(nv);
                app.requestData(app.config.getAssessRequireInfoById, {trainingClassId:nv}, "POST").then(function(res){
                    console.log(that.data);
                    //requiredHours:0,//必修
                    //courseChooseHours:0//选修
                    that.data.courseChooseHours=res.data.courseChooseHours;
                    that.data.requiredCourseHours=res.data.requiredCourseHours;
                    that.setData({
                        courseChooseHours:that.data.courseChooseHours,
                        requiredCourseHours:that.data.requiredCourseHours
                    });
                });
            }
        }

    },
    requireCourseHours:{
      type:String,
      value:0
    },
    hasInterestCourse:{
      type: Boolean,
      value: false
    },
    hasSelectCourse: {
      type: Boolean,
      value: false
    },
    periodType:{
      type:Number,
      valuse:0
    },
    wholeRemainingHours:{
      type: Number,
      valuse: 0
    },
    optionalPackageRequires:{
      type: Boolean,
      value: false
    },
    courseRequireHours:{
      type: Number,
      valuse: 0
    }
  },

  /**
   * 组件的初始数据
   */
  data: {

  },
  created() {
    // 初始化
    new app.AlertMessage(this)
    new app.WeToast(this)
  },
  /**
   * 组件的方法列表
   */
  methods: {
    goChoiceCourse() {
       if (this.properties.condition) {
         this.triggerEvent('goToChoiceCourseCallback')
         return
       }
      wx.navigateTo({
        url: '/pages/choiceCourseModule/selectedCourse/selectedCourse?' + "trainingClassId=" + this.data.trainingClassId
      })
      app.constant.classDetailSceneType = 4
    },
    onPullDownRefresh() {
      wx.showNavigationBarLoading()
    },
    /**
     * 兴趣课点击事件
     */
    interestClick() {
      wx.navigateTo({
        url: '/pages/trainclass/interestCourse/interestCourse' + '?trainingClassId=' + this.data.trainingClassId,
      })
    },
    /**
     * 视频播放
     */
    coursePlayClick(e){
      app.constant.classDetailSceneType = 1
      var item = e.currentTarget.dataset.item
      wx.navigateTo({
        url: '/pages/course/coursedetail/courseDetail' + '?trainingClassId=' + this.data.trainingClassId + '&courseId=' + item.courseId + '&type=' + '1'
      })
    }
  }
})
